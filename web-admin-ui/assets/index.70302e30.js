import{H as S,z as xe,r as b,A as Ce,L as Ue,d as u,K as ee,o as i,c as q,C as v,D as le,f as t,e,w as a,i as Me,M as N,N as Q,j as f,m as c,B as te,k as x,x as k,s as qe}from"./index.47c6a412.js";import{B as Se}from"./bignumber.7217e6bc.js";function De(_){return S({url:"/cms/quest/daily/list",method:"get",params:_})}function Pe(_){return S({url:"/cms/quest/daily/"+_,method:"get"})}function Be(_){return S({url:"/cms/quest/daily",method:"post",data:_})}function Ne(_){return S({url:"/cms/quest/daily",method:"put",data:_})}function Qe(_){return S({url:"/cms/quest/daily/"+_,method:"delete"})}const Re={class:"app-container"},Te={class:"dialog-footer"},$e=xe({name:"CMSQuestDaily"}),Le=Object.assign($e,{setup(_){const{proxy:y}=qe(),{sys_normal_disable:R,cms_quest_daily_category:T}=y.useDict("sys_normal_disable","cms_quest_daily_category"),j=b([]),w=b(!1),D=b(!1),V=b(!0),P=b(!0),$=b([]),A=b(!0),I=b(!0),F=b(0),z=b(""),ae=Ce({form:{},queryParams:{pageNum:1,pageSize:10,title:null,status:null,category:null},rules:{title:[{required:!0,message:"\u8BF7\u586B\u5199\u4EFB\u52A1\u6807\u9898",trigger:"blur"}],rewardCount:[{required:!0,message:"\u8BF7\u586B\u5199\u5B9D\u7BB1\u603B\u6570",trigger:["blur","change"]}]}}),{queryParams:d,form:n,rules:oe}=Ue(ae);function h(){V.value=!0,De(d.value).then(r=>{j.value=r.rows,F.value=r.total,V.value=!1})}function L(r,o,m){return m+" \u4E2A"}function ne(r,o,m){return m+"%"}function H(r,o,m){return Se(m).toString(10)+" MITC"}function ue(){w.value=!1,E()}function E(){n.value={id:null,title:null,subtitle:null,linkUrl:null,rewardCount:0,tokenProb:0,tokenMin:0,tokenMax:0,propsMin:0,propsMax:0,category:"1",status:"0",remark:null},y.resetForm("formRef")}function K(){d.value.pageNum=1,h()}function re(){y.resetForm("queryRef"),K()}function se(r){$.value=r.map(o=>o.id),A.value=r.length!==1,I.value=!r.length}function ie(){E(),w.value=!0,z.value="\u65B0\u589E\u6BCF\u65E5\u4EFB\u52A1"}function O(r){V.value=!0,E();const o=r.id||$.value;Pe(o).then(m=>{V.value=!1,n.value=m.data,w.value=!0,z.value="\u4FEE\u6539\u6BCF\u65E5\u4EFB\u52A1"})}function de(){y.$refs.formRef.validate(r=>{r&&(D.value=!0,n.value.id!=null?Ne(n.value).then(o=>{y.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),w.value=!1,h()}).finally(()=>{D.value=!1}):Be(n.value).then(o=>{y.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),w.value=!1,h()}).finally(()=>{D.value=!1}))})}function G(r){const o=r.id||$.value;y.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u7F16\u53F7\u4E3A"'+o+'"\u7684\u6BCF\u65E5\u4EFB\u52A1\uFF1F').then(function(){return V.value=!0,Qe(o)}).then(()=>{V.value=!1,h(),y.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{V.value=!1})}function pe(){y.download("cms/quest/daily/export",{...d.value},`\u6BCF\u65E5\u4EFB\u52A1_${new Date().getTime()}.xlsx`)}return h(),(r,o)=>{const m=u("el-input"),s=u("el-form-item"),J=u("el-option"),W=u("el-select"),g=u("el-button"),X=u("el-form"),B=u("el-col"),me=u("right-toolbar"),ce=u("el-row"),fe=u("el-empty"),p=u("el-table-column"),C=u("el-descriptions-item"),_e=u("el-descriptions"),Y=u("dict-tag"),ge=u("el-table"),be=u("pagination"),ye=u("el-radio-button"),Z=u("el-radio-group"),M=u("el-input-number"),ve=u("el-slider"),we=u("el-radio"),Ve=u("el-dialog"),U=ee("hasPermi"),ke=ee("loading");return i(),q("div",Re,[v(e(X,{model:t(d),ref:"queryRef",inline:!0,"label-width":"68px"},{default:a(()=>[e(s,{label:"\u4EFB\u52A1\u6807\u9898",prop:"title"},{default:a(()=>[e(m,{modelValue:t(d).title,"onUpdate:modelValue":o[0]||(o[0]=l=>t(d).title=l),placeholder:"\u8BF7\u8F93\u5165",clearable:"",onKeyup:Me(K,["enter"])},null,8,["modelValue","onKeyup"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u5206\u7C7B",prop:"category"},{default:a(()=>[e(W,{modelValue:t(d).category,"onUpdate:modelValue":o[1]||(o[1]=l=>t(d).category=l),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:a(()=>[(i(!0),q(N,null,Q(t(T),l=>(i(),f(J,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status"},{default:a(()=>[e(W,{modelValue:t(d).status,"onUpdate:modelValue":o[2]||(o[2]=l=>t(d).status=l),placeholder:"\u8BF7\u9009\u62E9",clearable:""},{default:a(()=>[(i(!0),q(N,null,Q(t(R),l=>(i(),f(J,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(g,{type:"primary",icon:"Search",onClick:K},{default:a(()=>[c("\u641C\u7D22")]),_:1}),e(g,{icon:"Refresh",onClick:re},{default:a(()=>[c("\u91CD\u7F6E")]),_:1})]),_:1})]),_:1},8,["model"]),[[le,t(P)]]),e(ce,{gutter:10,class:"mb8"},{default:a(()=>[e(B,{span:1.5},{default:a(()=>[v((i(),f(g,{type:"primary",plain:"",icon:"Plus",onClick:ie},{default:a(()=>[c("\u65B0\u589E ")]),_:1})),[[U,["cms:quest.daily:add"]]])]),_:1},8,["span"]),e(B,{span:1.5},{default:a(()=>[v((i(),f(g,{type:"success",plain:"",icon:"Edit",disabled:t(A),onClick:O},{default:a(()=>[c("\u4FEE\u6539 ")]),_:1},8,["disabled"])),[[U,["cms:quest.daily:edit"]]])]),_:1},8,["span"]),e(B,{span:1.5},{default:a(()=>[v((i(),f(g,{type:"danger",plain:"",icon:"Delete",disabled:t(I),onClick:G},{default:a(()=>[c("\u5220\u9664 ")]),_:1},8,["disabled"])),[[U,["cms:quest.daily:remove"]]])]),_:1},8,["span"]),e(B,{span:1.5},{default:a(()=>[v((i(),f(g,{type:"warning",plain:"",icon:"Download",onClick:pe},{default:a(()=>[c("\u5BFC\u51FA ")]),_:1})),[[U,["cms:quest.daily:export"]]])]),_:1},8,["span"]),e(me,{showSearch:t(P),"onUpdate:showSearch":o[3]||(o[3]=l=>te(P)?P.value=l:null),onQueryTable:h},null,8,["showSearch"])]),_:1}),v((i(),f(ge,{data:t(j),onSelectionChange:se},{empty:a(()=>[e(fe,{"image-size":80,description:"\u6682\u65E0\u5185\u5BB9"})]),default:a(()=>[e(p,{type:"selection",width:"35",align:"center"}),e(p,{type:"expand",align:"center",width:"35"},{default:a(l=>[e(_e,{title:"\u66F4\u591A\u4FE1\u606F",column:12,border:""},{default:a(()=>[e(C,{label:"\u4EFB\u52A1\u7F16\u53F7",span:6},{default:a(()=>[x("span",null,k(l.row.id),1)]),_:2},1024),e(C,{label:"\u5907\u6CE8\u4FE1\u606F",span:6},{default:a(()=>[x("span",null,k(l.row.remark),1)]),_:2},1024),e(C,{label:"\u521B\u5EFA\u8005",span:6},{default:a(()=>[x("span",null,k(l.row.createBy),1)]),_:2},1024),e(C,{label:"\u66F4\u65B0\u8005",span:6},{default:a(()=>[x("span",null,k(l.row.updateBy),1)]),_:2},1024),e(C,{label:"\u521B\u5EFA\u65F6\u95F4",span:6},{default:a(()=>[x("span",null,k(r.parseTime(l.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:2},1024),e(C,{label:"\u66F4\u65B0\u65F6\u95F4",span:6},{default:a(()=>[x("span",null,k(r.parseTime(l.row.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:2},1024)]),_:2},1024)]),_:1}),e(p,{label:"\u4EFB\u52A1\u5206\u7C7B",prop:"category",align:"center",width:"100"},{default:a(l=>[e(Y,{options:t(T),value:l.row.category},null,8,["options","value"])]),_:1}),e(p,{label:"\u4EFB\u52A1\u6807\u9898",prop:"title","show-overflow-tooltip":!0}),e(p,{label:"\u4EFB\u52A1\u4ECB\u7ECD",prop:"subtitle","show-overflow-tooltip":!0}),e(p,{label:"\u8DF3\u8F6C\u5730\u5740",prop:"linkUrl","show-overflow-tooltip":!0}),e(p,{label:"\u5B9D\u7BB1\u603B\u6570",prop:"rewardCount",align:"right",formatter:L}),e(p,{label:"\u6E38\u620F\u5E01\u83B7\u5F97\u6982\u7387",prop:"tokenProb",align:"right",formatter:ne}),e(p,{label:"\u6E38\u620F\u5E01\u4E0B\u9650",prop:"tokenMin",align:"right",formatter:H}),e(p,{label:"\u6E38\u620F\u5E01\u4E0A\u9650",prop:"tokenMax",align:"right",formatter:H}),e(p,{label:"\u9053\u5177\u6570\u91CF\u4E0B\u9650",prop:"propsMin",align:"right",formatter:L}),e(p,{label:"\u9053\u5177\u6570\u91CF\u4E0A\u9650",prop:"propsMax",align:"right",formatter:L}),e(p,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status",align:"center",width:"80"},{default:a(l=>[e(Y,{options:t(R),value:l.row.status},null,8,["options","value"])]),_:1}),e(p,{label:"\u64CD\u4F5C","class-name":"small-padding fixed-width",align:"center",width:"160"},{default:a(l=>[v((i(),f(g,{link:"",type:"primary",icon:"Edit",onClick:he=>O(l.row)},{default:a(()=>[c("\u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[U,["cms:quest.daily:edit"]]]),v((i(),f(g,{link:"",type:"primary",icon:"Delete",onClick:he=>G(l.row)},{default:a(()=>[c("\u5220\u9664 ")]),_:2},1032,["onClick"])),[[U,["cms:quest.daily:remove"]]])]),_:1})]),_:1},8,["data"])),[[ke,t(V)]]),v(e(be,{total:t(F),page:t(d).pageNum,"onUpdate:page":o[4]||(o[4]=l=>t(d).pageNum=l),limit:t(d).pageSize,"onUpdate:limit":o[5]||(o[5]=l=>t(d).pageSize=l),onPagination:h},null,8,["total","page","limit"]),[[le,t(F)>0]]),e(Ve,{title:t(z),modelValue:t(w),"onUpdate:modelValue":o[18]||(o[18]=l=>te(w)?w.value=l:null),width:"750px","append-to-body":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:a(()=>[x("div",Te,[e(g,{loading:t(D),type:"primary",onClick:de},{default:a(()=>[c("\u786E \u5B9A")]),_:1},8,["loading"]),e(g,{onClick:ue},{default:a(()=>[c("\u53D6 \u6D88")]),_:1})])]),default:a(()=>[e(X,{ref:"formRef",model:t(n),rules:t(oe),"label-width":"200px"},{default:a(()=>[e(s,{label:"\u4EFB\u52A1\u5206\u7C7B",prop:"category"},{default:a(()=>[e(Z,{modelValue:t(n).category,"onUpdate:modelValue":o[6]||(o[6]=l=>t(n).category=l)},{default:a(()=>[(i(!0),q(N,null,Q(t(T),l=>(i(),f(ye,{key:l.value,label:l.value},{default:a(()=>[c(k(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u6807\u9898",prop:"title"},{default:a(()=>[e(m,{modelValue:t(n).title,"onUpdate:modelValue":o[7]||(o[7]=l=>t(n).title=l),placeholder:"\u8BF7\u8F93\u5165",clearable:""},null,8,["modelValue"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u4ECB\u7ECD",prop:"subtitle"},{default:a(()=>[e(m,{modelValue:t(n).subtitle,"onUpdate:modelValue":o[8]||(o[8]=l=>t(n).subtitle=l),type:"textarea",placeholder:"\u8BF7\u8F93\u5165",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(s,{label:"\u8DF3\u8F6C\u5730\u5740",prop:"linkUrl"},{default:a(()=>[e(m,{modelValue:t(n).linkUrl,"onUpdate:modelValue":o[9]||(o[9]=l=>t(n).linkUrl=l),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u8DF3\u8F6C\u5730\u5740",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1}),e(s,{label:"\u5956\u52B1\u5B9D\u7BB1\u603B\u6570\uFF08\u4E2A\uFF09",prop:"rewardCount"},{default:a(()=>[e(M,{modelValue:t(n).rewardCount,"onUpdate:modelValue":o[10]||(o[10]=l=>t(n).rewardCount=l),step:1,"step-strictly":"",min:0,max:1e4},null,8,["modelValue"])]),_:1}),e(s,{label:"\u6E38\u620F\u5E01\u83B7\u5F97\u6982\u7387\uFF080-100%\uFF09",prop:"tokenProb"},{default:a(()=>[e(ve,{modelValue:t(n).tokenProb,"onUpdate:modelValue":o[11]||(o[11]=l=>t(n).tokenProb=l),"show-input":"",step:1,min:0,max:100},null,8,["modelValue"])]),_:1}),e(s,{label:"\u83B7\u5F97\u6E38\u620F\u5E01\u6570\u91CF\u4E0B\u9650",prop:"tokenMin"},{default:a(()=>[e(M,{modelValue:t(n).tokenMin,"onUpdate:modelValue":o[12]||(o[12]=l=>t(n).tokenMin=l),step:.01,precision:10,min:0,max:1e8,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(s,{label:"\u83B7\u5F97\u6E38\u620F\u5E01\u6570\u91CF\u4E0A\u9650",prop:"tokenMax"},{default:a(()=>[e(M,{modelValue:t(n).tokenMax,"onUpdate:modelValue":o[13]||(o[13]=l=>t(n).tokenMax=l),step:.01,precision:10,min:0,max:1e8,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(s,{label:"\u83B7\u5F97\u9053\u5177\u6570\u91CF\u4E0B\u9650\uFF08\u4E2A\uFF09",prop:"propsMin"},{default:a(()=>[e(M,{modelValue:t(n).propsMin,"onUpdate:modelValue":o[14]||(o[14]=l=>t(n).propsMin=l),step:1,"step-strictly":"",min:0,max:1e4},null,8,["modelValue"])]),_:1}),e(s,{label:"\u83B7\u5F97\u9053\u5177\u6570\u91CF\u4E0A\u9650\uFF08\u4E2A\uFF09",prop:"propsMax"},{default:a(()=>[e(M,{modelValue:t(n).propsMax,"onUpdate:modelValue":o[15]||(o[15]=l=>t(n).propsMax=l),step:1,"step-strictly":"",min:0,max:1e4},null,8,["modelValue"])]),_:1}),e(s,{label:"\u4EFB\u52A1\u72B6\u6001",prop:"status"},{default:a(()=>[e(Z,{modelValue:t(n).status,"onUpdate:modelValue":o[16]||(o[16]=l=>t(n).status=l)},{default:a(()=>[(i(!0),q(N,null,Q(t(R),l=>(i(),f(we,{key:l.value,label:l.value},{default:a(()=>[c(k(l.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"\u5907\u6CE8\u4FE1\u606F",prop:"remark"},{default:a(()=>[e(m,{modelValue:t(n).remark,"onUpdate:modelValue":o[17]||(o[17]=l=>t(n).remark=l),type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Le as default};
