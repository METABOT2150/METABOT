import{H as y,z as te,r as v,A as oe,L as ae,d as s,K as F,o as V,c as ne,e,w as o,C as B,j as k,m as x,f as a,B as D,k as g,x as h,s as se}from"./index.47c6a412.js";import{B as N}from"./bignumber.7217e6bc.js";function re(u){return y({url:"/cms/config/base/list",method:"get",params:u})}function ie(u){return y({url:"/cms/config/base/"+u,method:"get"})}function ue(u){return y({url:"/cms/config/base",method:"post",data:u})}function de(u){return y({url:"/cms/config/base",method:"put",data:u})}function pe(u){return y({url:"/cms/config/base/"+u,method:"delete"})}const me={class:"app-container"},fe={class:"dialog-footer"},ce=te({name:"CMSConfigBase"}),be=Object.assign(ce,{setup(u){const{proxy:_}=se(),P=v([]),m=v(!1),U=v(!1),f=v(!0),C=v(!0),S=v(""),G=oe({form:{},rules:{levelUpgrade:[{required:!0,message:"\u8BF7\u586B\u5199",trigger:"blur"}]}}),{form:n,rules:O}=ae(G);function w(){f.value=!0,re().then(r=>{P.value=r.data,f.value=!1})}function z(r,l,i){return i+" \u79D2"}function M(r,l,i){return N(i).toString(10)+"%"}function L(r,l,i){return N(i).toString(10)+"SOL"}function j(){m.value=!1,R()}function R(){n.value={id:null,levelMax:0,levelUpgrade:null,lossRate:0,feeBot:0,feeProps:0,feeUpgrade:0,gasTrx:0,gasMint:0,remark:null},_.resetForm("formRef")}function A(){R(),m.value=!0,S.value="\u6DFB\u52A0\u914D\u7F6E\u9879"}function E(r){f.value=!0,R();const l=r.id;ie(l).then(i=>{f.value=!1,n.value=i.data,m.value=!0,S.value="\u4FEE\u6539\u914D\u7F6E\u9879"})}function q(){_.$refs.formRef.validate(r=>{r&&(U.value=!0,n.value.id!=null?de(n.value).then(l=>{_.$modal.msgSuccess("\u4FEE\u6539\u6210\u529F"),m.value=!1,w()}).finally(()=>{U.value=!1}):ue(n.value).then(l=>{_.$modal.msgSuccess("\u65B0\u589E\u6210\u529F"),m.value=!1,w()}).finally(()=>{U.value=!1}))})}function H(r){const l=r.id;_.$modal.confirm('\u662F\u5426\u786E\u8BA4\u5220\u9664\u914D\u7F6E\u9879\u7F16\u53F7\u4E3A"'+l+'"\u7684\u6570\u636E\u9879\uFF1F').then(function(){return f.value=!0,pe(l)}).then(()=>{f.value=!1,w(),_.$modal.msgSuccess("\u5220\u9664\u6210\u529F")}).catch(()=>{f.value=!1})}return w(),(r,l)=>{const i=s("el-button"),I=s("el-col"),K=s("right-toolbar"),Q=s("el-row"),J=s("el-empty"),b=s("el-descriptions-item"),W=s("el-descriptions"),d=s("el-table-column"),X=s("el-table"),$=s("el-input"),p=s("el-form-item"),c=s("el-input-number"),Y=s("el-form"),Z=s("el-dialog"),T=F("hasPermi"),ee=F("loading");return V(),ne("div",me,[e(Q,{gutter:10,class:"mb8"},{default:o(()=>[e(I,{span:1.5},{default:o(()=>[B((V(),k(i,{type:"primary",plain:"",icon:"Plus",onClick:A},{default:o(()=>[x("\u65B0\u589E ")]),_:1})),[[T,["cms:config.base:add"]]])]),_:1},8,["span"]),e(K,{showSearch:a(C),"onUpdate:showSearch":l[0]||(l[0]=t=>D(C)?C.value=t:null),onQueryTable:w},null,8,["showSearch"])]),_:1}),B((V(),k(X,{data:a(P)},{empty:o(()=>[e(J,{"image-size":80,description:"\u6682\u65E0\u5185\u5BB9"})]),default:o(()=>[e(d,{type:"expand",align:"center",width:"35"},{default:o(t=>[e(W,{title:"\u66F4\u591A\u4FE1\u606F",column:12,border:""},{default:o(()=>[e(b,{label:"\u914D\u7F6E\u7F16\u53F7",span:6},{default:o(()=>[g("span",null,h(t.row.id),1)]),_:2},1024),e(b,{label:"\u5907\u6CE8\u4FE1\u606F",span:6},{default:o(()=>[g("span",null,h(t.row.remark),1)]),_:2},1024),e(b,{label:"\u521B\u5EFA\u8005",span:6},{default:o(()=>[g("span",null,h(t.row.createBy),1)]),_:2},1024),e(b,{label:"\u66F4\u65B0\u8005",span:6},{default:o(()=>[g("span",null,h(t.row.updateBy),1)]),_:2},1024),e(b,{label:"\u521B\u5EFA\u65F6\u95F4",span:6},{default:o(()=>[g("span",null,h(r.parseTime(t.row.createTime,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:2},1024),e(b,{label:"\u66F4\u65B0\u65F6\u95F4",span:6},{default:o(()=>[g("span",null,h(r.parseTime(t.row.updateTime,"{y}-{m}-{d} {h}:{i}:{s}")),1)]),_:2},1024)]),_:2},1024)]),_:1}),e(d,{label:"\u673A\u5668\u4EBA\u5347\u7EA7\u6D88\u8017",prop:"levelUpgrade","show-overflow-tooltip":!0}),e(d,{label:"\u673A\u5668\u4EBA\u6700\u9AD8\u7B49\u7EA7",prop:"levelMax",align:"right"}),e(d,{label:"\u673A\u5668\u4EBA\u635F\u8017\u901F\u7387",prop:"lossRate",align:"right",formatter:z}),e(d,{label:"\u5347\u7EA7\u673A\u5668\u4EBA\u624B\u7EED\u8D39",prop:"feeUpgrade",align:"right",formatter:M}),e(d,{label:"\u8D2D\u4E70\u673A\u5668\u4EBA\u624B\u7EED\u8D39",prop:"feeBot",align:"right",formatter:M}),e(d,{label:"\u8D2D\u4E70\u9053\u5177\u624B\u7EED\u8D39",prop:"feeProps",align:"right",formatter:M}),e(d,{label:"\u4EA4\u6613Gas\u8D39",prop:"gasTrx",align:"right",formatter:L}),e(d,{label:"MintGas\u8D39",prop:"gasMint",align:"right",formatter:L}),e(d,{label:"\u64CD\u4F5C","class-name":"small-padding fixed-width",align:"center",width:"160",fixed:"right"},{default:o(t=>[B((V(),k(i,{link:"",type:"primary",icon:"Edit",onClick:le=>E(t.row)},{default:o(()=>[x("\u4FEE\u6539 ")]),_:2},1032,["onClick"])),[[T,["cms:config.base:edit"]]]),B((V(),k(i,{link:"",type:"primary",icon:"Delete",onClick:le=>H(t.row)},{default:o(()=>[x("\u5220\u9664 ")]),_:2},1032,["onClick"])),[[T,["cms:config.base:remove"]]])]),_:1})]),_:1},8,["data"])),[[ee,a(f)]]),e(Z,{title:a(S),modelValue:a(m),"onUpdate:modelValue":l[10]||(l[10]=t=>D(m)?m.value=t:null),width:"750px","append-to-body":!1,"destroy-on-close":!0,"close-on-click-modal":!1,"close-on-press-escape":!1},{footer:o(()=>[g("div",fe,[e(i,{loading:a(U),type:"primary",onClick:q},{default:o(()=>[x("\u786E \u5B9A")]),_:1},8,["loading"]),e(i,{onClick:j},{default:o(()=>[x("\u53D6 \u6D88")]),_:1})])]),default:o(()=>[e(Y,{ref:"formRef",model:a(n),rules:a(O),"label-width":"180px"},{default:o(()=>[e(p,{label:"\u673A\u5668\u4EBA\u5347\u7EA7\u6D88\u8017",prop:"levelUpgrade"},{default:o(()=>[e($,{modelValue:a(n).levelUpgrade,"onUpdate:modelValue":l[1]||(l[1]=t=>a(n).levelUpgrade=t),type:"textarea",placeholder:"\u8BF7\u586B\u5199(\u82F1\u6587\u9017\u53F7','\u5206\u5272, \u7B2C1\u7EA7\u6D88\u8017\u4E3A0)",maxlength:"500",autosize:{minRows:3,maxRows:6},"show-word-limit":""},null,8,["modelValue"])]),_:1}),e(p,{label:"\u673A\u5668\u4EBA\u6700\u9AD8\u7B49\u7EA7",prop:"levelMax"},{default:o(()=>[e(c,{modelValue:a(n).levelMax,"onUpdate:modelValue":l[2]||(l[2]=t=>a(n).levelMax=t),step:1,"step-strictly":"",min:1,max:100},null,8,["modelValue"])]),_:1}),e(p,{label:"\u673A\u5668\u4EBA\u635F\u8017\u901F\u7387\uFF08\u79D2\uFF09",prop:"lossRate"},{default:o(()=>[e(c,{modelValue:a(n).lossRate,"onUpdate:modelValue":l[3]||(l[3]=t=>a(n).lossRate=t),step:1,"step-strictly":"",min:0,max:1e9,"controls-position":"right"},null,8,["modelValue"])]),_:1}),e(p,{label:"\u5347\u7EA7\u673A\u5668\u4EBA\u624B\u7EED\u8D39\uFF08%\uFF09",prop:"feeUpgrade"},{default:o(()=>[e(c,{modelValue:a(n).feeUpgrade,"onUpdate:modelValue":l[4]||(l[4]=t=>a(n).feeUpgrade=t),step:.01,precision:10,min:0,max:100,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(p,{label:"\u8D2D\u4E70\u673A\u5668\u4EBA\u624B\u7EED\u8D39\uFF08%\uFF09",prop:"feeBot"},{default:o(()=>[e(c,{modelValue:a(n).feeBot,"onUpdate:modelValue":l[5]||(l[5]=t=>a(n).feeBot=t),step:.01,precision:10,min:0,max:100,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(p,{label:"\u8D2D\u4E70\u9053\u5177\u624B\u7EED\u8D39\uFF08%\uFF09",prop:"feeProps"},{default:o(()=>[e(c,{modelValue:a(n).feeProps,"onUpdate:modelValue":l[6]||(l[6]=t=>a(n).feeProps=t),step:.01,precision:10,min:0,max:100,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(p,{label:"\u4EA4\u6613Gas\u8D39\uFF08SOL\uFF09",prop:"gasTrx"},{default:o(()=>[e(c,{modelValue:a(n).gasTrx,"onUpdate:modelValue":l[7]||(l[7]=t=>a(n).gasTrx=t),step:.01,precision:10,min:0,max:1e4,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(p,{label:"MintNFT Gas\u624B\u7EED\u8D39\uFF08SOL\uFF09",prop:"gasMint"},{default:o(()=>[e(c,{modelValue:a(n).gasMint,"onUpdate:modelValue":l[8]||(l[8]=t=>a(n).gasMint=t),step:.01,precision:10,min:0,max:1e4,"controls-position":"right"},null,8,["modelValue","step"])]),_:1}),e(p,{label:"\u5907\u6CE8\u4FE1\u606F",prop:"remark"},{default:o(()=>[e($,{modelValue:a(n).remark,"onUpdate:modelValue":l[9]||(l[9]=t=>a(n).remark=t),type:"textarea",placeholder:"\u8BF7\u586B\u5199",maxlength:"500","show-word-limit":""},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{be as default};
